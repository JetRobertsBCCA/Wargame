<div id="army-builder-page" class="page">
    <h2>Army Builder</h2>
    <p>Build your army list, select your commander, and calculate points. Fragment effects are shown based on your commander's evolution path.</p>

    <div class="army-builder-container">
        <!-- Main Builder Panel -->
        <div class="army-panel">
            <!-- Commander Selection -->
            <div class="card">
                <h3>1. Select Commander</h3>
                <select id="commander-select" class="commander-select" onchange="updateSelectedCommander()">
                    <option value="">-- Choose a Commander --</option>
                </select>
                <div id="commander-preview"></div>
            </div>

            <!-- Evolution Path -->
            <div class="card">
                <h3>2. Select Evolution Path</h3>
                <div class="filter-controls" id="evolution-select">
                    <button class="filter-btn" onclick="selectEvolution('knowledge')">Knowledge</button>
                    <button class="filter-btn" onclick="selectEvolution('chaos')">Chaos</button>
                    <button class="filter-btn" onclick="selectEvolution('hybrid')">Hybrid</button>
                </div>
                <div id="evolution-preview"></div>
            </div>

            <!-- Battle Size -->
            <div class="card">
                <h3>3. Battle Size</h3>
                <div class="filter-controls">
                    <button class="filter-btn" onclick="setPointsLimit(100)">Skirmish (100)</button>
                    <button class="filter-btn active" onclick="setPointsLimit(200)">Medium (200)</button>
                    <button class="filter-btn" onclick="setPointsLimit(300)">Large (300)</button>
                    <button class="filter-btn" onclick="setPointsLimit(500)">Epic (500)</button>
                </div>
            </div>

            <!-- Unit Selection -->
            <div class="card">
                <h3>4. Select Units</h3>
                <div class="filter-controls">
                    <button class="filter-btn active" onclick="filterUnits('all')">All</button>
                    <button class="filter-btn" onclick="filterUnits('Infantry')">Infantry</button>
                    <button class="filter-btn" onclick="filterUnits('Cavalry')">Cavalry</button>
                    <button class="filter-btn" onclick="filterUnits('Support')">Support</button>
                    <button class="filter-btn" onclick="filterUnits('Specialist')">Specialist</button>
                    <button class="filter-btn" onclick="filterUnits('Artillery')">Artillery</button>
                    <button class="filter-btn" onclick="filterUnits('Scout')">Scout</button>
                    <button class="filter-btn" onclick="filterUnits('War Machine')">War Machines</button>
                </div>
                <div id="unit-selector" class="unit-selector">
                    <!-- Units loaded dynamically -->
                </div>
            </div>

            <!-- Fragment Selection -->
            <div class="card">
                <h3>5. Assign Fragments</h3>
                <div id="fragment-selector">
                    <!-- Fragments loaded dynamically -->
                </div>
                <div id="fragment-effects"></div>
            </div>
        </div>

        <!-- Army Summary Panel -->
        <div>
            <div class="points-display">
                <div>Points Used</div>
                <div class="points-total" id="points-used">0</div>
                <div class="points-limit">/ <span id="points-limit">200</span></div>
                <div class="points-bar">
                    <div class="points-fill" id="points-bar-fill" style="width: 0%"></div>
                </div>
                <div id="points-status" style="color: #4caf50">Ready for battle!</div>
            </div>

            <div class="army-panel" style="margin-top: 1rem;">
                <h4>Your Army</h4>
                <div id="army-commander-display"></div>
                <hr style="border-color: #0f3460;">
                <div id="army-list" class="army-list">
                    <p style="color: #888; text-align: center;">Add units to your army</p>
                </div>
            </div>

            <div class="army-panel" style="margin-top: 1rem;">
                <h4>Army Actions</h4>
                <button class="btn" onclick="saveArmy()" style="width: 100%; margin-bottom: 0.5rem;">üíæ Save Army</button>
                <button class="btn btn-secondary" onclick="loadArmy()" style="width: 100%; margin-bottom: 0.5rem;">üìÇ Load Army</button>
                <button class="btn btn-secondary" onclick="clearArmy()" style="width: 100%;">üóëÔ∏è Clear Army</button>
            </div>

            <div class="army-panel" style="margin-top: 1rem;">
                <h4>Fragment Effects Summary</h4>
                <div id="active-fragment-effects">
                    <p style="color: #888; font-size: 0.9rem;">Select fragments to see their effects based on your evolution path.</p>
                </div>
            </div>
        </div>
    </div>
</div>
